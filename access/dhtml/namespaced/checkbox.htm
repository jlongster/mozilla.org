<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/css" href="http://www.w3.org/StyleSheets/TR/base"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:wairole="http://www.w3.org/2005/01/wai-rdf/GUIRoleTaxonomy#"
      xmlns:aaa="http://www.w3.org/2005/07/aaa">
<head>
<title>DHTML Checkbox</title>

<script type="text/javascript" >
<![CDATA[
// Mouse and keyboard event handlers for controls
function checkBoxEvent(event)
{
  if ((event.type == "click" && event.button == 0) ||
      (event.type == "keydown" && event.keyCode == 32)) {
    // Toggle checkbox
    var checkbox = event.target;
    if (checkbox.getAttributeNS("http://www.w3.org/2005/07/aaa", "checked") == "true") {
       checkbox.removeAttributeNS("http://www.w3.org/2005/07/aaa", "checked");
    }
    else {
      checkbox.setAttributeNS("http://www.w3.org/2005/07/aaa", "checked", "true");
    }
    return false;  // Don't continue propagating event
  }
  return true;  // Browser can still use event
};
]]>
</script>

<style type="text/css">
  @namespace aaa url("http://www.w3.org/2005/07/aaa");

  .checkbox:before {
    content: url('./unchecked.gif')
   }
  .checkbox[aaa|checked="true"]:before {
    content: url('./checked.gif')
  }
</style>
</head>

<body>
  <p>Here's a checkbox that you can click on.</p>

  <div>
	  <span class="checkbox" id="chbox1" role="wairole:checkbox" aaa:checked="true" tabindex="0"
			onkeydown="return checkBoxEvent(event);" onclick="return checkBoxEvent(event);" >
		Include decorative fruit basket
	  </span>
  </div>

  <div>
	  <span class="checkbox" id="chbox2" role="wairole:checkbox" aaa:checked="true" tabindex="0"
	        aaa:required="true"
			onkeydown="return checkBoxEvent(event);" onclick="return checkBoxEvent(event);" >
		Required checkbox
	  </span>
  </div>

  <div>
	  <span class="checkbox" id="chbox3" role="wairole:checkbox" aaa:checked="true" tabindex="0"
	        aaa:invalid="true"
			onkeydown="return checkBoxEvent(event);" onclick="return checkBoxEvent(event);" >
		Invalid checkbox
	  </span>
  </div>

  <p>
    <a href="http://www.google.com">Random Google link</a>
  </p>

  <p>
    Demonstration of setting focus manually:
    <button onclick="getElementById('chbox1').focus();">Set focus to checkbox</button>
  </p>

  <p>
    Demonstration of removing something from tab cycle:
    <button tabindex="-1" id="nofocus">Here's a button you can't tab to (tabindex = -1)</button>
  </p>

  <p>
    Try manually setting focus to something removed from the tab cycle:
    <button onclick="try { getElementById('nofocus').focus();} catch(e) { alert('not focusable');} ">Click to try and focus the untabbable</button>
  </p>
</body>
</html>
