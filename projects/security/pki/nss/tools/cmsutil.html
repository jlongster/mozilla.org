<?php

$html_title = 'Using cmsutil';

$menu = array(
    'id' => 'default',
);

require_once "{$config['file_root']}/includes/header.inc.php"

?>

<center>
   <h2>Using <tt>cmsutil</tt></h2>

<i><FONT SIZE="-1">

Newsgroup: <A HREF="news://news.mozilla.org/mozilla.dev.tech.crypto">mozilla.dev.tech.crypto</A><BR>

Technical contact:
<A HREF="mailto:mcgreer@netscape.com?subject=cmsutil Doc Feedback">
Ian McGreer</A><BR>

Manager:
<A HREF="mailto:wtc@netscape.com?subject=cmsutil Doc Feedback">Wan-Teh Chang</A></FONT></i>
</center></FONT></i>


<p>
The <tt>cmsutil</tt> command-line utility uses the <a href="../smime/">S/MIME Toolkit</a> to perform basic operations, such as encryption and decryption, on 
<a href="http://www.ietf.org/rfc/rfc2630.txt">Cryptographic Message Syntax&nbsp;(CMS)</a> messages.

<H2><A NAME="Syntax"></A>
<A NAME="1028268">
 Syntax
</A></H2><A NAME="1033678">
To run <tt>cmsutil</tt>, type the command</A></P>
<A NAME="1033679">
<CODE>cmsutil </CODE><I>option</I><CODE> [</CODE><I>arguments</I><CODE>]</CODE></A></P>
<A NAME="1028271">
where <I>option</I> and <I>arguments</I> are combinations of the options and arguments listed in the following section. 
Each command takes one option. Each option may take zero or more arguments. To see a usage string, issue the command 
without options. </A></P>

<H3><A NAME="Head2;"></A>
<A NAME="1027593">
 Options and Arguments
</A></H3>

<A NAME="1028291">
Options specify an action. Option arguments modify an action. The options and arguments for the <CODE>cmsutil</CODE> command are defined as follows:<P><B></B>
<TABLE BORDER="2" CELLPADDING=5>
<TR><TD VALIGN=baseline ALIGN=left><A NAME="1043286">
<B>Options
</B></A><TD VALIGN=baseline ALIGN=left><P><A NAME="1043288">
</A></P>

<TR><TD VALIGN=baseline ALIGN=left><P><A NAME="1032245">
<CODE>-D</CODE></A></P><TD VALIGN=baseline ALIGN=left><P>Decode a message.</TR>

<TR><TD VALIGN=baseline ALIGN=left><P><A NAME="1032249">
<CODE>-C</CODE></A></P><TD VALIGN=baseline ALIGN=left><P><A NAME="1038844">
Encrypt a message. </A></P></TR>

<TR><TD VALIGN=baseline ALIGN=left><P><A NAME="1038660">
<CODE>-E </CODE></A></P><TD VALIGN=baseline ALIGN=left><P><A NAME="1038851">
Envelope a message. </A></P></TR>

<TR><TD VALIGN=baseline ALIGN=left><P><A NAME="1038656">
<CODE>-O </CODE></A></P><TD VALIGN=baseline ALIGN=left><P><A NAME="1038943">
Create a certificates-only message. </A></P></TR>

<TR><TD VALIGN=baseline ALIGN=left><P><A NAME="1038652">
<CODE>-S </CODE></A></P><TD VALIGN=baseline ALIGN=left><P><A NAME="1038654">
Sign a message.</A></P> </TR>

<TR><TD><B>Arguments</B></A></P><TD VALIGN=baseline ALIGN=left><P><A NAME="1043284">
</A></P>

<TR><TD VALIGN=baseline ALIGN=left><P><A NAME="1038834">
<CODE>-c</CODE> <I>content</I></A></P><TD VALIGN=baseline ALIGN=left><P><A NAME="1039085">
Use this detached content (decode only). </A></P></TR>

<TR><TD VALIGN=baseline ALIGN=left><P><A NAME="1038834">
<CODE>-d</CODE> <I>dbdir</I></A></P><TD VALIGN=baseline ALIGN=left><P>
Specify the key/certificate database directory (default is "<tt>.</tt>")</TR> 

<TR><TD VALIGN=baseline ALIGN=left><P><A NAME="1037903">
<CODE>-e</CODE> <I>envfile</I></A></P><TD VALIGN=baseline ALIGN=left><P><A NAME="1039095">
Specify a file containing an enveloped message for a set of recipients to which you would like to send an encrypted message. 
If this is the first encrypted message for that set of recipients, a new enveloped message will be created 
that you can then use for future messages (encrypt only).</A></P>

<TR><TD VALIGN=baseline ALIGN=left><P><A NAME="1037899">
<CODE>-G</CODE></A></P><TD VALIGN=baseline ALIGN=left><P><A NAME="1039102">
Include a signing time attribute (sign only).</A></P>

<TR><TD VALIGN=baseline ALIGN=left><P><A NAME="1038731">
<CODE>-h</CODE> <I>num</I></A></P><TD VALIGN=baseline ALIGN=left><P><A NAME="1039116">
Generate email headers with info about CMS message (decode only).</A></P>

<TR><TD VALIGN=baseline ALIGN=left><P><A NAME="1038727">
<CODE>-i</CODE> <I>infile</I></A></P><TD VALIGN=baseline ALIGN=left><P><A NAME="1039213">
Use <i>infile</i> as a source of data (default is <tt>stdin</tt>).</A></P>

<TR><TD VALIGN=baseline ALIGN=left><P><A NAME="1038723">
<CODE>-N</CODE> <I>nickname</I></A></P><TD VALIGN=baseline ALIGN=left><P><A NAME="1039235">
Specify nickname of certificate to sign with (sign only).</A></P>

<TR><TD VALIGN=baseline ALIGN=left><P><A NAME="1038719">
<CODE>-n</CODE> </A></P><TD VALIGN=baseline ALIGN=left><P><A NAME="1039652">
Suppress output of contents (decode only).</A></P>

<TR><TD VALIGN=baseline ALIGN=left><P><A NAME="1038715">
<CODE>-o</CODE> <I>outfile</I></A></P><TD VALIGN=baseline ALIGN=left><P><A NAME="1038717">
Use outfile as a destination of data (default is <tt>stdout</tt>). </A></P>


<TR><TD VALIGN=baseline ALIGN=left><P><A NAME="1038711">
<CODE>-P</CODE> </A></P><TD VALIGN=baseline ALIGN=left><P><A NAME="1038713">
Include an S/MIME capabilities attribute. </A></P>

<TR><TD VALIGN=baseline ALIGN=left><P><A NAME="1043973">
<tt>-p</tt> <i>password</i>
<TD VALIGN=baseline ALIGN=left><P><A NAME="1043985">
Use password as key database password. </tr>

<tr>
<td>
<tt>-r</tt>&nbsp<i>recipient1</i><tt>,</tt><i>recipient2</t><tt>,&nbsp;.&nbsp;.&nbsp.</tt>
<td>
Specify list of recipients (email addresses) for an encrypted or enveloped message.  
For certificates-only message, list of certificates to send.</tr>

<tr>
<td>
<tt>-T</tt>
<td>Suppress content in CMS message (sign only).</tr>

<tr>
<td>
<tt>-u</tt> <i>certusage</i>
<td>Set type of cert usage (default is <tt>certUsageEmailSigner)</tt>.</tr>

<tr>
<td>
<tt>-Y</tt> <i>ekprefnick</i>
<td>Specify an encryption key preference by nickname.</tr>


</TABLE>


<H2><A NAME="Usage"></A>
Usage</h3>
</A>

<tt>cmsutil -C </tt>[<tt>-i </tt><i>infile</i>]<tt> </tt>[<tt>-o </tt><i>outfile</i>]<tt> 
</tt>[<tt>-d </tt><i>dbdir</i>]<tt> </tt>[<tt>-p </tt><i>password</i>]<tt> -r "</tt><i>recipient1</i><tt>,</tt><i>recipient2</i><tt>,&nbsp;.&nbsp;.&nbsp;." -e </tt><i>envfile</i><tt>

<p>cmsutil -D </tt>[<tt>-i </tt><i>infile</i>]<tt> </tt>[<tt>-o </tt><i>outfile</i>]<tt> 
</tt>[<tt>-d </tt><i>dbdir</i>]<tt> </tt>[<tt>-p </tt><i>password</i>]<tt> </tt>[<tt>-c </tt><i>content</i>]<tt> </tt>[<tt>-n</tt>]<tt> </tt>[<tt>-h </tt><i>num</i>]<tt>

<p>cmsutil -E </tt>[<tt>-i </i></tt><i>infile</i>]<tt> </tt>[<tt>-o </tt><i>outfile</i>]<tt> 
</tt>[<tt>-d </tt><i>dbdir</i>]<tt> </tt>[<tt>-p </tt><i>password</i>]<tt> -r "</tt></tt><i>recipient1</i><tt>,</tt><i>recipient2</i><tt>,&nbsp.&nbsp.&nbsp.</i>"

<p>cmsutil -O </tt>[<tt>-i </tt><i>infile</i>]<tt> </tt>[<tt>-o </tt><i>outfile</i>]<tt> 
</tt>[<tt>-d </tt><i>dbdir</i>]<tt> </tt>[<tt>-p </tt><i>password</i>]<tt> -r "</tt><i>cert1</i><tt>,</tt><i>cert2</i><tt>,&nbsp;.&nbsp;.&nbsp;."

<p>cmsutil -S </tt>[<tt>-i </tt><i>infile</i>]<tt> </tt>[<tt>-o </tt><i>outfile</i>]<tt> 
</tt>[<tt>-d </tt><i>dbdir</i>]<tt> </tt>[<tt>-p </tt><i>password</i>]<tt> -N </tt><i>nickname</i>[<tt>-TGP</tt>]<tt> </tt>[<tt>-Y </tt><i>ekprefnick</i>]




<?
require_once "{$config['file_root']}/includes/footer.inc.php"
?>
