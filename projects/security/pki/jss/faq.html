<?php

$html_title = 'FAQ';

$menu = array(
    'id' => 'default',
);

$extra_headers = '
<meta name="GENERATOR" content="Mozilla/4.79C-CCK-MCD  [en] (X11; U; SunOS 5.8 sun4u) [Netscape]">
<meta name="CREATED" content="20020913;14103300">
<meta name="CHANGED" content="20020917;21245700">
<meta name="Author" content="Glen Beasley">
';

require_once "{$config['file_root']}/includes/header.inc.php"

?>

<center><b><font size=+1>JSS Frequently Asked Questions</font></b>
<br>&nbsp;
<p><b><font size=+1>20 September 2002</font></b>

<br><i><font size=-1>Primary Newsgroup: <a href="news://news.mozilla.org:119/mozilla.dev.tech.crypto">mozilla.dev.tech.crypto</a></font></i>
<br><i><font size=-1>Alternate Newsgroup: <a href="news://news.mozilla.org:23/mozilla.dev.tech.crypto">mozilla.dev.tech.crypto</a></font></i>
</center>

<p><b><font size=+1>Content:</font></b>
<dl>
<dd>
<a href="#JDKJCE1">What versions of JDK and JCE do you suggest?</a></dd>

<dd>
<a href="#64bit">Does JSS have 64 bit support?</a></dd>

<dd>
<a href="#Fips">Is JSS FIPS Compliant?</a></dd>

<dd>
<a href="#Sample">Is there any sample code and documentation?</a></dd>

<dd>
<a href="#setCipherPolicy">If I don't call setCipherPolicy, is the DOMESTIC
policy used by default?</a></dd>

<dd>
<a href="#SSL Hanging">My SSL connection is hanging on Windows?</a></dd>

<dl><a href="#SSLTLS cipher">How can I tell which SSL/TLS ciphers JSS supports?</a></dl>

<dd>
<a href="#SSL Debug">How can I debug my SSL connection?</a></dd>

<dd>
<a href="#SSL Callback">Can you explain JSS SSL certificate approval callbacks?</a></dd>

<dd>
<a href="#JSS instance">Can I have multiple JSS instances reading separate
db's?</a></dd>

<dd>
<a href="#JSS init">Once JSS initialized, I can't get anymore instances
with CertificateFactory.getInstance(X.509)?</a></dd>

<dd>
<a href="#Sign Date">Is it possible to sign data in Java with JSS?</a></dd>

<dd>
<a href="#convertX509">How do I convert org.mozilla.jss.crypto.X509Certificate
to org.mozilla.jss.pkix.cert.Certificate?</a></dd>

<dd>
<a href="#convertPkix">How do I convert org.mozilla.jss.pkix.cert to org.mozilla.jss.crypto.X509Certificate?</a></dd>

<dd>
<a href="#pkc11">Is it possible to use JSS to access cipher functionality
from pkcs11 modules?</a></dd>

<dd>
<a href="#token name">Can you explain token names and keys with regards
to JSS?</a></dd>

<dd>
<a href="#JSSJSSE">JSS 3.2 has JCA support. When will JSS have JSSE support?</a></dd>
</dl>
<a NAME="JDKJCE1"></a><b>What versions of JDK and JRE do you suggest?</b>
<dl>
<dd>
JSS 3.x works with JDK versions 1.2 or higher, except version 1.3.0.
Most attention for future development and bug fixing will go to JDK 1.4 and
later, so use that if you can.
If you are using JDK 1.3.x, you 
will need to use at least version 1.3.1--see
<a href="http://bugzilla.mozilla.org/show_bug.cgi?id=113808">bug 113808</a>.
JSS only supports
the native threading model (no green threads). For JSS 3.2 and higher,
if you use JDK 1.4 or higher you will not need to install the JCE, but if you using
an earlier version of the JDK then you will also have to install JCE 1.2.1.
See also the document
<a href="using_jss.html">
Using JSS</a>.
</dl>
<a NAME="64bit"></a><b>Does JSS have 64 bit support?</b>
<dl>
<dd>
Yes, JSS 3.2 and higher supports 64 bit. You will need JDK 1.4 or higher
and all the 64 bit versions of NSPR, and NSS. As well you must use the
java flag -d64 to specify the 64-bit data model.</dd>
</dl>
<a NAME="Fips"></a><b>Is JSS FIPS Compliant?</b>
<dl>
<dd>
NSS is a FIPS-certified software library. JSS is considered a FIPS-compliant
software library since it only uses NSS for any and all crypto routines.</dd>
</dl>
<a NAME="Sample"></a><b>Is there any sample code and documentation?</b>
<dl>
<dd>
The <a href="using_jss.html">Using JSS</a>
 document describes how to set up your environment to run
JSS. The only other documentation is the <a href="javadoc/">Javadoc</a>.

<p>JSS example code is essentially developer test code; with that understanding,
the best directory to look for sample code is in the org/mozilla/jss/tests
directory:
<p><a href="http://lxr.mozilla.org/mozilla/source/security/jss/org/mozilla/jss/tests">http://lxr.mozilla.org/mozilla/source/security/jss/org/mozilla/jss/tests</a>
<p><a href="http://lxr.mozilla.org/security/source/security/jss/org/mozilla/jss/tests/CloseDBs.java#47">org/mozilla/jss/tests/CloseDBs.java</a>
<br><a href="http://lxr.mozilla.org/security/source/security/jss/org/mozilla/jss/tests/KeyFactoryTest.java#81">org/mozilla/jss/tests/KeyFactoryTest.java</a>
<br><a href="http://lxr.mozilla.org/security/source/security/jss/org/mozilla/jss/tests/DigestTest.java#44">org/mozilla/jss/tests/DigestTest.java</a>
<br><a href="http://lxr.mozilla.org/security/source/security/jss/org/mozilla/jss/tests/JCASigTest.java#50">org/mozilla/jss/tests/JCASigTest.java</a>
<br><a href="http://lxr.mozilla.org/security/source/security/jss/org/mozilla/jss/tests/KeyWrapping.java#45">org/mozilla/jss/tests/KeyWrapping.java</a>
<br><a href="http://lxr.mozilla.org/security/source/security/jss/org/mozilla/jss/tests/ListCerts.java#40">org/mozilla/jss/tests/ListCerts.java</a>
<br><a href="http://lxr.mozilla.org/security/source/security/jss/org/mozilla/jss/tests/PK10Gen.java#43">org/mozilla/jss/tests/PK10Gen.java</a>
<br><a href="http://lxr.mozilla.org/security/source/security/jss/org/mozilla/jss/tests/SDR.java#47">org/mozilla/jss/tests/SDR.java</a>
<br><a href="http://lxr.mozilla.org/security/source/security/jss/org/mozilla/jss/tests/SelfTest.java#46">org/mozilla/jss/tests/SelfTest.java</a>
<br><a href="http://lxr.mozilla.org/security/source/security/jss/org/mozilla/jss/tests/SetupDBs.java#42">org/mozilla/jss/tests/SetupDBs.java</a>
<br><a href="http://lxr.mozilla.org/security/source/security/jss/org/mozilla/jss/tests/SigTest.java#64">org/mozilla/jss/tests/SigTest.java</a>
<br><a href="http://lxr.mozilla.org/security/source/security/jss/org/mozilla/jss/tests/SymKeyGen.java#44">org/mozilla/jss/tests/SymKeyGen.java</a>
<br><a href="http://lxr.mozilla.org/security/source/security/jss/org/mozilla/jss/tests/TestKeyGen.java#64">org/mozilla/jss/tests/TestKeyGen.java</a>
<br><a href="http://lxr.mozilla.org/security/source/security/jss/org/mozilla/jss/tests/SSLClientAuth.java#99">org/mozilla/jss/tests/SSLClientAuth.java</a>
<br><a href="http://lxr.mozilla.org/security/source/security/jss/org/mozilla/jss/tests/ListCACerts.java#8">org/mozilla/jss/tests/ListCACerts.java</a>
<br><a href="http://lxr.mozilla.org/security/source/security/jss/org/mozilla/jss/tests/KeyStoreTest.java#68">org/mozilla/jss/tests/KeyStoreTest.java</a>
<br><a href="http://lxr.mozilla.org/security/source/security/jss/org/mozilla/jss/tests/VerifyCert.java#86">org/mozilla/jss/tests/VerifyCert.java</a>
<p>SSL examples:
<p><a href="http://lxr.mozilla.org/mozilla/source/security/jss/org/mozilla/jss/tests/SSLClientAuth.java">org/mozilla/jss/tests/SSLClientAuth.java</a>
<br><a href="http://lxr.mozilla.org/mozilla/source/security/jss/org/mozilla/jss/ssl/SSLClient.java">org/mozilla/jss/ssl/SSLClient.java</a>
<br><a href="http://lxr.mozilla.org/mozilla/source/security/jss/org/mozilla/jss/ssl/SSLServer.java">org/mozilla/jss/ssl/SSLServer.java</a>
<br><a href="http://lxr.mozilla.org/mozilla/source/security/jss/org/mozilla/jss/ssl/SSLTest.java">org/mozilla/jss/ssl/SSLTest.java</a>
<p>Other test code that may prove useful:
<p><a href="http://lxr.mozilla.org/security/source/security/jss/org/mozilla/jss/asn1/INTEGER.java#131">org/mozilla/jss/asn1/INTEGER.java</a>
<br><a href="http://lxr.mozilla.org/security/source/security/jss/org/mozilla/jss/asn1/SEQUENCE.java#574">org/mozilla/jss/asn1/SEQUENCE.java</a>
<br><a href="http://lxr.mozilla.org/security/source/security/jss/org/mozilla/jss/asn1/SET.java#876">org/mozilla/jss/asn1/SET.java</a>
<br><a href="http://lxr.mozilla.org/security/source/security/jss/org/mozilla/jss/pkcs10/CertificationRequest.java#269">org/mozilla/jss/pkcs10/CertificationRequest.java</a>
<br><a href="http://lxr.mozilla.org/security/source/security/jss/org/mozilla/jss/pkcs12/PFX.java#329">org/mozilla/jss/pkcs12/PFX.java</a>
<br><a href="http://lxr.mozilla.org/security/source/security/jss/org/mozilla/jss/pkix/cert/Certificate.java#279">org/mozilla/jss/pkix/cert/Certificate.java</a>
<br><a href="http://lxr.mozilla.org/security/source/security/jss/org/mozilla/jss/pkix/cmmf/CertRepContent.java#148">org/mozilla/jss/pkix/cmmf/CertRepContent.java</a>
<br><a href="http://lxr.mozilla.org/security/source/security/jss/org/mozilla/jss/pkix/crmf/CertReqMsg.java#265">org/mozilla/jss/pkix/crmf/CertReqMsg.java</a>
<br><a href="http://lxr.mozilla.org/security/source/security/jss/org/mozilla/jss/pkix/crmf/CertTemplate.java#530">org/mozilla/jss/pkix/crmf/CertTemplate.java</a>
<br><a href="http://lxr.mozilla.org/security/source/security/jss/org/mozilla/jss/pkix/primitive/Name.java#276">org/mozilla/jss/pkix/primitive/Name.java</a>
<br><a href="http://lxr.mozilla.org/security/source/security/jss/org/mozilla/jss/provider/javax/crypto/JSSSecretKeyFactorySpi.java#287">org/mozilla/jss/provider/javax/crypto/JSSSecretKeyFactorySpi.java</a>
<br><a href="http://lxr.mozilla.org/security/source/security/jss/org/mozilla/jss/util/UTF8Converter.java#302">org/mozilla/jss/util/UTF8Converter.java</a>
<br><a href="http://lxr.mozilla.org/security/source/security/jss/org/mozilla/jss/util/Base64InputStream.java#237">org/mozilla/jss/util/Base64InputStream.java</a>
<br><a href="http://lxr.mozilla.org/security/source/security/jss/samples/PQGGen.java#44">jss/samples/PQGGen.java</a>
<br><a href="http://lxr.mozilla.org/security/source/security/jss/samples/pkcs12.java#57">jss/samples/pkcs12.java</a><a href="http://lxr.mozilla.org/security/source/security/jss/samples/pkcs12.java#57"></a>
</dd></dl>
<p><a NAME="setCipherPolicy"></a><b>If I don't call setCipherPolicy, is
the DOMESTIC policy used by default?</b>
<dl>
<dd>
Yes, domestic is the default because we call NSS_SetDomesticPolicy() during
CryptoManager.initialize(). setCipherPolicy does not need to be called
by a JSS app unless that app wants to limit itself to export-allowed cipher
suites.</dd>
</dl>
<a NAME="SSL Hanging"></a><b>My SSL connection is hanging on Windows?</b>
<dl>
<dd>
NSPR makes use of NT vs. Windows distinction and provides different NT
and Windows builds. Many Netscape products, including NSS, have NT and
Windows builds that are essentially the same except one difference: one
is linked with the NT version of NSPR and the other is linked with the
Windows version of NSPR. The NT fiber problem affects applications that
call blocking system calls from the primordial thread. Either use the WIN
95 version of NSPR/NSS/JSS components (essentially all non-fiber builds)
or set the environment variable NSPR_NATIVE_THREADS_ONLY=1. You can find
more information in bugzilla bug <a href="http://bugzilla.mozilla.org/show_bug.cgi?id=102251">102251</a>
SSL session cache locking issue with NT fibers</dd>

<br><a NAME="SSLTLS cipher"></a><b>How can I tell which SSL/TLS ciphers
JSS supports?</b>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Check <a href="http://lxr.mozilla.org/mozilla/source/security/jss/org/mozilla/jss/ssl/SSLSocket.java#730">http://lxr.mozilla.org/mozilla/source/security/jss/org/mozilla/jss/ssl/SSLSocket.java#730</a></dl>
<a NAME="SSL Debug"></a><b>How can I debug my SSL connection?</b>
<dl>
<dd>
By using the NSS tool <a href="../nss/tools/ssltap.html">ssltap</a></dd>
</dl>
<a NAME="SSL Callback"></a><b>Can you explain JSS SSL certificate approval
callbacks?</b>
<dl>
<dd>
NSS has three callbacks related to certificates. JSS has two. But JSS combines
two of the NSS callbacks into one.</dd>

<dt>
&nbsp;</dt>

<dd>
NSS's three SSL cert callbacks are:

<ol>
<li>
SSL_AuthCertificateHook sets a callback to authenticate the peer's certificate.
It is called instead of NSS's routine for authenticating certificates.</li>

<li>
SSL_BadCertHook sets a callback that is called when NSS's routine fails
to authenticate the certificate.</li>

<li>
SSL_GetClientAuthDataHook sets a callback to return the local certificate
for SSL client auth.</li>
</ol>

<p>JSS's two callbacks are:

<ol>
<li>
SSLCertificateApprovalCallback is a combination of SSL_AuthCertificateHook
and SSL_BadCertHook. It runs NSS's cert authentication check, then calls
the callback regardless of whether the cert passed or failed. The callback
is told whether the cert passed, and then can do anything extra that it
wants to do before making a final decision.</li>

<li>
SSLClientCertificateSelectionCallback is analogous to SSL_GetClientAuthDataHook.</li>
</ol>
</dd></dl>

<p><br><a NAME="JSS instance"></a><b>Can I have multiple JSS instances
reading separate db's?</b>
<dl>
<dd>
No, you can only have one initialized instance of JSS for each database.</dd>
</dl>
<a NAME="JSS init"></a><b>Once JSS initialized, I can't get anymore instances
with CertificateFactory.getInstance("X.509")?</b>
<dl>
<dd>
In version previous to JSS 3.1, JSS removes the default SUN provider on
startup. Upgrade to the latest JSS, or, in the
<tt>CryptoManager.InitializationValues</tt> object you pass to
<tt>CryptoManager.initialize()</tt>, set <tt>removeSunProivider=true</tt>.</dd>
</dl>
<a NAME="Sign Date"></a><b>Is it possible to sign data in Java with JSS?
What
I am trying to do is write a Java applet that will access the Netscape
certificate store, retrieve a X509 certificate and then sign some data.</b>
<dl>
<dd>
The best way to do this is with the PKCS #7 signedData type. Check out
the
<a href="javadoc/org/mozilla/jss/pkcs7/package-summary.html">javadoc</a>.
</dd></dl>

<a NAME="convertX509"></a><b>How do I convert
org.mozilla.jss.crypto.X509Certificate
to org.mozilla.jss.pkix.cert.Certificate?</b>
<dl>
<dd>
<pre>
import java.io.ByteArrayInputStream;

[...]

Certificate cert = (Certificate) ASN1Util.decode(
        Certificate.getTemplate(),x509Cert.getEncoded() );
</pre></dd></dl>

<a NAME="convertPkix"></a><b>How do I convert org.mozilla.jss.pkix.cert
to org.mozilla.jss.crypto.X509Certificate?</b>
<dl>
<dd>
<a href="http://mozilla.org/projects/security/pki/jss/javadoc/org/mozilla/jss/CryptoManager.html#importCertPackage(byte[],%20java.lang.String)">
Cryptomanager.importCertPackage()</a></dd>
</dl>
<a NAME="pkc11"></a><b>Is it possible to use JSS to acces cipher functionality
from pkcs11 modules?</b>
<dl>
<dd>
Yes. Before JSS 3.2 you would use CryptoManager to obtain the CryptoToken
you want to use, then
call CryptoToken.getCipherContext() to get an encryption engine. But
as of JSS 3.2 you would use the
<a href="provider_notes.html">JSS JCA provider</a>.
</dd></dl>
<a NAME="token name"></a><b>Can you explain token names and keys with regards
to JSS?</b>
<dl>
<dd>
The token name is different depending on which application you are running.
In JSS, the token is called "Internal Key Storage Token". You can look
it up by name using CryptoManager.getTokenByName(), but a better way is
to call CryptoManager.getInternalKeyStorageToken(), which works no matter
what the token is named. In general, a key is a handle to an underlying
object on a PKCS #11 token, not merely a Java object residing in memory.
Symmetric Key usage:&nbsp; basically encrypt/decrypt is for data and wrap/unwrap
is for keys.</dd>
</dl>
<a NAME="JSSJSSE"></a>J<b>SS 3.2 has JCA support. When will JSS have JSSE
support?</b>
<dl>
<dd>
Not in the near future due to pluggability is disabled in the JSSE version
included in J2SE 1.4.x for export control reasons.</dd>
</dl>



<?
require_once "{$config['file_root']}/includes/footer.inc.php"
?>
