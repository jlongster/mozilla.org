<?php

$html_title = 'NSPR 4.4.1 Release';

$menu = array(
    'id' => 'default',
);

require_once "{$config['file_root']}/includes/header.inc.php"

?>

<br>
<center>
<h2>NSPR 4.4.1 Release</h2>
</center>
<center>26-November-2003</center>
<h2>
Table of Contents</h2>
<ol>
  <li> <a href="#Introduction">Introduction</a></li>
  <li> <a href="#What%27s">What's New</a></li>
  <li> <a href="#New%20Release%20naming">Library Version Specification</a></li>
  <li> <a href="#Platforms">Platforms</a></li>
  <li> <a href="#Compatibility">Compatibility</a></li>
  <li> <a href="#Release">Release Components</a></li>
  <li> <a href="#Test">Test Data</a></li>
  <li> <a href="#How%20to%20file%20bug">Reporting bugs</a></li>
  <li> <a href="#Building%20from">Building from source</a></li>
  <li> <a href="#Contact">Contact Info</a></li>
</ol>
<h3>
1. <a name="Introduction"></a>Introduction</h3>
The NSPR 4.4.1 release is available at
/share/builds/components/nspr20/v4.4.1.<br>
<br>
NSPR 4.4 designates the NSPR in Mozilla 1.4/Netscape 7.1. We also
describe the changes in NSPR 4.4 in this document.<br>
<h3>
2. <a name="What's"></a>What's New</h3>
NSPR 4.4.1 provides some new features and some bug fixes..
<h4>2.1 New functions and features</h4>
The following new functions or features have been added in NSPR 4.4.<br>
<ul>
  <li>Added function PR_GetPathSeparator(). See <a
 href="http://bugzilla.mozilla.org/show_bug.cgi?id=171883">Bugzilla bug
171883</a>. This function returns the character used to separate the
directories listed in a search path, such as the PATH environment
variable.</li>
</ul>
<h4>
2.2 Bug fixes</h4>
The following table shows a summary of bug fixes in NSPR 4.4 and 4.4.1.<br>
<ul>
  <li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=104529">Bug
104529</a>: PR_fprintf I/O function misbehaves with standard output.</li>
  <li>Bugs <a href="http://bugzilla.mozilla.org/show_bug.cgi?id=124958">124958</a>,
    <a href="http://bugzilla.mozilla.org/show_bug.cgi?id=221385">221385</a>,
    <a href="http://bugzilla.mozilla.org/show_bug.cgi?id=217121">217121</a>:
fixed a crash in strftime (called by PR_FormatTime) on OpenBSD,
FreeBSD, and Mac OS X.<br>
  </li>
  <li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=126932">Bug
126932</a>: NSPR tests don't run on OS/2.<br>
  </li>
  <li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=126937">Bug
126937</a>: PR_GetSysfdTableMax incorrectly implemented on OS/2,
PR_SetSysfdTableSize not implemented.</li>
  <li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=188246">Bug
188246</a>: Build NSPR with GCC 3.x.</li>
  <li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=190538">Bug
190538</a>: Size/Speed optimizations for OS/2.</li>
  <li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=198634">Bug
198634</a>: Fixes to OS/2 threading code.</li>
  <li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=199901">Bug
199901</a>: OS/2 - Cookies don't work (PR_snprintf problem).<br>
  </li>
  <li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=200335">Bug
200335</a>: The zone allocator does not work on Mac OS X (Darwin).</li>
  <li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=200561">Bug
200561</a>: Cannot load NSS programs due to libnspr.so failure on AIX
platform.<br>
  </li>
  <li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=202826">Bug
202826</a>: NSPR should use __declspec instead of _declspec.</li>
  <li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=203317">Bug
203317</a>: getipnodebyxxxx routines not threadsafe on OpenVMS.</li>
  <li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=204092">Bug
204092</a>: Build NSPR on Solaris with -xO4 optimization.</li>
  <li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=205582">Bug
205582</a>: NSPR maps EHOSTUNREACH to PR_UNKNOWN_ERROR on Unix.</li>
  <li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=206815">Bug
206815</a>: Purify UMR in PR_Poll's poll() call.<br>
  </li>
  <li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=207421">Bug
207421</a>: XSLT format-number() function formats number incorrectly
causing it to be rounded down and the fractional part to begin with a
colon (:).</li>
  <li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=207614">Bug
207614</a>: prcpucfg.h always updated.</li>
  <li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=211512">Bug
211512</a>: PR_Connect() fails on panther beta.</li>
  <li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=212708">Bug
212708</a>: nspr pulls in libdl on macosx.<br>
  </li>
  <li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=214411">Bug
214411</a>: Solaris native thread support: GetThreadPrivate fails if
thread not created via NSPR.</li>
  <li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=217501">Bug
217501</a>: Use sane libpath in NSPR libraries.</li>
  <li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=217968">Bug
217968</a>: mozilla/nsprpub/pr/tests/servr_uk.c", line 66.9: 1506-236
(W) Macro name STACKSIZE has been redefined.</li>
  <li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=225260">Bug
225260</a>: Link NSPR dynamic shared libraries with the
-headerpad_max_install_names option.</li>
  <li><a href="http://bugzilla.mozilla.org/show_bug.cgi?id=226686">Bug
226686</a>: The WINNT version of PR_Accept leaks a socket handle if it
fails.<br>
  </li>
</ul>
<h3>
3. <a name="New Release naming"></a>Library Name and Versioning</h3>
The binaries for this release are named libnspr4 (nspr4 on Win 95).
<p>The full release number of nspr library can be determined in several
ways:
</p>
<p>1. The nspr library exports a function, libVersionPoint, that can be
called to retrieve the version of the library. The function and data
prototypes are available for other libraries to provide similar version
information.
<br>
2. On Win32 systems, the version number is embedded in the resource
descriptor of the DLL and can be viewed using Windows Explorer. On Unix
system, the "what" command of sccs or the "ident" command of rcs can be
used to obtain the version information.
<br>
3. The PR_VersionCheck function can be called to check for
compatibility;
given a version number the function returns success condition if the
version
of the nspr library loaded into the application is compatible.
</p>
<h3>4. <a name="Platforms"></a>Platforms</h3>
The set of supported platforms is listed in the following table. For
most
platforms, a single release of the nspr library is used to support all
the current releases of the OS.<br>
<br>
&lt;&lt; UNDER CONSTRUCTION &gt;&gt;<br>
<h3>5. <a name="Compatibility"></a>Compatibility</h3>
The NSPR 4.4.1 release is backward compatible with NSPR 4.0.x, 4.1.x,
4.2.x, 4.3.x, and 4.4.
<p>For the nspr library, backward compatibility does not preclude the
addition
of new error codes to the set of <a
 href="http://www.mozilla.org/docs/refList/refNSPR/prerr.html#1027954">nspr
error codes </a>already defined. An application should allow for nspr
functions
returning error codes not documented for the particular release with
which
it is linked. This helps to retain backward compatibility as new error
codes are added upon discovery of new information about
platform-specific
error codes.
</p>
<h3>6. <a name="Release"></a>Release Components</h3>
The main components of this release are a set of shared libraries and
header
files for each platform. A debug build and a release (optimized) build
of the libraries are made available for each platform.
<h4>6.1 Platform Directory</h4>
The platform-dependent name of the directory where the components are
placed
is of the form
<p>&lt;os-name&gt;&lt;os-version&gt;[_&lt;compiler&gt;][cpu-arch][_&lt;implementation
strategy&gt;][_&lt;addr-bits&gt;]_&lt;DBG|OPT&gt;.OBJ
</p>
<p> For example,
<br>
SunOS5.8_OPT.OBJ (optimized build)
<br>
HP-UXB.11.00_64_DBG.OBJ (64-bit, debug build)
</p>
<h4>6.2 Implementation Strategy</h4>
For the implementation of nspr, different strategies
are used on different platforms. On some platforms the nspr threads
map directly to the native threads on the platform, while on others
nspr
supports both threads that are scheduled by nspr and the native
threads.
<p> The default implementation strategies in this release are:
<br>
- pthreads: all Unix platforms
<br>
- classic: Win NT (combined MxN model, with Windows threads
and fibers)
<br>
- native threads: Win95
</p>
<h4>6.3 Components</h4>
Under each &lt;platform&gt; directory, there are:
<p>1. include directory, containing the header files
<br>
2. lib directory, containing the libraries. Three libraries are built
on all platforms: nspr, plc, plds. Only shared (dynamic link) versions
of the libraries are built.
</p>
<p>The nspr library exports the core nspr functions.
</p>
<p>The plc (Portable Library C) library is a separate library from the
core nspr. You do
<br>
not need to use plc if you just want to use the core nspr functions.
The plc library currently
<br>
contains thread-safe string functions and functions for processing
command-line options.
</p>
<p>The plds (Portable Library Data Structures) library supports data
structures
such as arenas and hash tables. It is important to note that services
of plds are not thread-safe. To use these services in a multi-threaded
environment,
clients have to implement their own thread-safe access, by acquiring
locks/monitors,
for example.
</p>
<p>For Solaris platforms with UltraSPARC processors only, a
platform-specific
library, libnspr_flt, is also supplied. (libnspr_flt replaces
the libultrasparc library in NSPR 4.2.x or earlier.)
This library implements optimized
versions of atomic operations by using the features present in the
UltraSPARC
(V9) processors, but not in the SPARC (V8) processors. This library
is linked into libnspr by use of the auxiliary
filter mechanism of the Solaris linker. To use this library at runtime
on UltraSPARC systems, libnspr_flt4.so should be installed in a
subdirectory named cpu/sparcv8plus relative to the directory where
libnspr4.so resides.
</p>
<p>3. bin directory, containing a perl script, compile-et.pl, and a
Java
bundle, prerr.properties.
<br>
4. mdheader.jar, jar file for the header files.
<br>
5. mdbinary.jar, jar for the libraries, executable programs,
and scripts.
</p>
<h3>7. <a name="Test"></a>Test Data</h3>
All the major functional areas of nspr were tested using the programs
in
the nspr test suite. Both functional and stress tests in the pr/tests
directory
were successfully run on multi-processor systems for most platforms,
except
for Win95/98.
<h3> 8. <a name="How to file bug"></a>Reporting bugs</h3>
Bugs discovered should be reported by filing a report in <a
 href="http://bugzilla.mozilla.org/enter_bug.cgi?product=NSPR">Bugzilla</a>.
The following information is required
<ul>
  <li>platform (Solaris 8, HP-UX 11.0, etc.)</li>
  <li>number of cpus in the system</li>
  <li>a stack trace, in the event of a crash</li>
  <li>reproducibility of the problem</li>
  <li>location of core dump, if available, along with those for the
libraries
and executables</li>
</ul>
<h3> 9. <a name="Building from"></a>Building from source</h3>
This release is built from the source, at the CVS repository rooted at
cvs.mozilla.org:/cvsroot, with the CVS tag
<br>
NSPR_4_4_1_RTM. You can check out the source from CVS by
<br>
cvs co -r NSPR_4_4_1_RTM mozilla/nsprpub
<p>To build, do
<br>
cd mozilla/nsprpub
<br>
./configure<br>
gmake export
</p>
<h3>10. <a name="Contact"></a>Contact Info</h3>
<a href="http://www.mozilla.org/projects/nspr/">http://www.mozilla.org/projects/nspr/</a>
- NSPR documentation<br>
<a href="news://news.mozilla.org/netscape.public.mozilla.nspr">netscape.public.mozilla.nspr</a>
- nspr newsgroup at mozilla.org
<p></p>
<hr width="100%">
<blockquote> </blockquote>


<?
require_once "{$config['file_root']}/includes/footer.inc.php"
?>
