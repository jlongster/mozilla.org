<?php

$html_title = 'NSPR 3.0 Release';

$menu = array(
    'id' => 'default',
);

$extra_headers = '
<META NAME="Author" CONTENT="Srinivas Lingutla">
<META NAME="GENERATOR" CONTENT="Mozilla/4.05 [en]C-NSCP  (WinNT; U) [Netscape]">
';

require_once "{$config['file_root']}/includes/header.inc.php"

?>

&nbsp;
<BR>&nbsp;
<CENTER>
<H2>
NSPR 3.0 Release</H2></CENTER>

<CENTER>Oct-6-98</CENTER>

<CENTER>&nbsp;</CENTER>

<H2>
Table of Contents</H2>

<OL>
<LI>
<A HREF="#Introduction">Introduction</A></LI>

<LI>
<A HREF="#What's">What's New</A></LI>

<LI>
<A HREF="#New Release naming">Library Version Specification</A></LI>

<LI>
<A HREF="#Platforms">Platforms</A></LI>

<LI>
<A HREF="#Compatibility">Compatibility</A></LI>

<LI>
<A HREF="#Release">Release Components</A></LI>

<LI>
<A HREF="#Test">Test Data</A></LI>

<LI>
<A HREF="#How to file bug">Reporting bugs</A></LI>

<LI>
<A HREF="#Building from">Building from source</A></LI>

<LI>
<A HREF="#Contact">Contact Info</A></LI>
</OL>

<H3>
1.&nbsp;<A NAME="Introduction"></A>Introduction</H3>
The release 3.0 of nspr is now available at /m/dist/nspr20/v3.0. This release
is binary compatible with the 0529B release of nspr.
<H3>
2.&nbsp;<A NAME="What's"></A>What's New</H3>
Several new cross-platform and platform-specific features are available
in this release, in addition to bug fixes.
<H4>
1.1 New functions and features</H4>
1. Automatic attachment of native threads
<BLOCKQUOTE>With this feature, native threads created directly by the application
can call nspr functions without the need for calling PR_AttachThread/PR_DetachThread.</BLOCKQUOTE>
2.&nbsp; HP-UX 64-bit version
<BLOCKQUOTE>For the HP-UX 11.0, a second version of nspr with 64-bit support
is available.</BLOCKQUOTE>
3. Digitial Unix 64-bit version
<BLOCKQUOTE>The nspr library is no longer compiled/linked with the -taso
option, which limited the address space to 32 bits.</BLOCKQUOTE>
4. Multiwait enhancements on NT
<BLOCKQUOTE>On NT, the multiwait functions now call NT asynchronous I/O
functions instead of PR_Poll.</BLOCKQUOTE>
5. Instrumentation (counters and tracing)
<BLOCKQUOTE>A new set of interfaces for defining and managing <A HREF="http://warp/hardcore/prj-nspr20/docplan/man/prcountr.htm">counters</A>
and another set for event <A HREF="http://warp/hardcore/prj-nspr20/docplan/man/prtrace.htm">tracing</A>
are available.</BLOCKQUOTE>
6. Version specification
<BLOCKQUOTE>A library <A HREF="http://vault/engineeringdocs/VersionEmbedding.html">version</A>
specification scheme is implemented in nspr. A function interface and a
data structure to obtain the library's version information are exported.</BLOCKQUOTE>

<DT>
7. Reader/writer locks</DT>

<BLOCKQUOTE>Reader/writer locks are now available, in addition to the existing
mutually-exclusive locks in libnspr, in a new library, libnsps. This library
is not subject to NPL/MPL requirements and should not be used in the open
source projects on mozilla.org.</BLOCKQUOTE>
8. Atomic stacks
<BLOCKQUOTE>A new set of functions is available for creation and use of
thread-safe stacks. These functions are, typically, useful for managing
lists of free resources and are optimized to use atomic processor instructions,
where available, in place of general purpose locks..</BLOCKQUOTE>
9. FD caching
<BLOCKQUOTE>The file descriptor caching is now done using atomic stacks,
for faster performance.</BLOCKQUOTE>

<H4>
1.2 Bug fixes</H4>
Several <A HREF="http://scopus.mcom.com/bugsplat/buglist.cgi?bug_status=RESOLVED&assigned_to=&changedin=&reporter=&area=CODE&area=PERF&area=PERFORMANCE&product=NSPR&version=2.0&project=Netscape+Security+Services+%28NSS%29&project=NSPR&escalation_engineer=&qa_assigned_to=&resolved_ts=29-May-98&resolved_ts_2=30-Sep-98&verified_ts=&verified_ts_2=&moz_reported_by=&moz_assigned_to=&cmdtype=doit&namedcmd=nspr20bug&newqueryname=&order=%22Importance%22&form_name=query">bugs</A>
are fixed in this release.
<H4>
1.3 New library component</H4>
There is a new component library,&nbsp; libnsps, in this release. This
component will contain services that are supported only on server platforms,&nbsp;
is built on top of nspr and is not subject to the requirements of the <A HREF="http://www.mozilla.org/NPL/NPL-1.0.html">Netscape
Public License</A> (NPL) or the <A HREF="http://www.mozilla.org/NPL/MPL-1.0.html">Mozilla
Public License</A> (MPL). Currently, only the reader/writer lock functions
are defined in this library.
<H4>
1.4 Obsolete Features</H4>
1. The PRSegment functions have been deleted because they have no users
and they are of limited use.

<P>2. The library exporting the garbage-collector functions, libmsgc, is
no longer shipped.
<H3>
3.&nbsp;<A NAME="New Release naming"></A>Library Version Specification</H3>
The current scheme of naming nspr20 releases after the date of the release
is dropped. A new <A HREF="http://vault/engineeringdocs/VersionEmbedding.html">version
specification</A> scheme is used to label the nspr20 release with a 3 digit
number, of the form X.Y.Z. The first digit refers to the major release,
the second one to the minor release and the third one to the patch number.
An increase in the minor release implies addition of bug fixes and features,
while binary compatibility is maintained. An increase in the major number
implies a, potentially, incompatible release. For a given major and minor
release number, an increase in the patch number implies addition of bug
fixes, but no major new features, while retaining binary compatibility.

<P>The nspr library exports a function, libVersionPoint, that can be called
to retrieve the version of the library. At runtime clients of nspr can
call this function to check for version compatibility.&nbsp; The function
and data prototypes are available for other libraries to provide similar
version information. The version information for the library is also available
as a global symbol, prVersionDescription_libnsrp21.
<H3>
4.&nbsp;<A NAME="Platforms"></A>Platforms</H3>
The set of supported platforms is listed in the following table. For most
platforms, a single release of the nspr library is used to support all
the current releases of the OS.
<BR>&nbsp;
<CENTER><TABLE BORDER WIDTH="100%" >
<TR>
<TD>
<H4>
Platform</H4>
</TD>

<TD>
<H4>
Release Build/Name</H4>
</TD>

<TD>
<H4>
Certified OS releases</H4>
</TD>

<TD>
<H4>
Compiler/options</H4>
</TD>
</TR>

<TR>
<TD>Solaris</TD>

<TD>2.5.1&nbsp;
<BR>SunOS5.5.1_sparc_PTH_OPT.OBJ&nbsp;</TD>

<TD>2.5.1&nbsp;
<BR>2.6</TD>

<TD>Sun WorkShop 4.2</TD>
</TR>

<TR>
<TD>Irix (pthreads)&nbsp;
<BR>(default)</TD>

<TD>6.2&nbsp;
<BR>IRIX6.2_n32_PTH_OPT.OBJ&nbsp;
<BR>&nbsp;</TD>

<TD>6.2&nbsp;
<BR>6.3&nbsp;
<BR>6.4</TD>

<TD>MIPS Pro 7.2.1/-n32</TD>
</TR>

<TR>
<TD>Irix (sprocs)</TD>

<TD>6.2&nbsp;
<BR>IRIX6.2_o32_MxN_OPT.OBJ&nbsp;
<BR>&nbsp;</TD>

<TD>6.2&nbsp;
<BR>6.3&nbsp;
<BR>6.4</TD>

<TD>MIPS Pro 7.2.1</TD>
</TR>

<TR>
<TD>AIX</TD>

<TD>4.2&nbsp;
<BR>AIX4.2_PTH_OPT.OBJ</TD>

<TD>4.2&nbsp;
<BR>4.3</TD>

<TD>xlC_r 3.1.4</TD>
</TR>

<TR>
<TD>Digital Unix</TD>

<TD>4.0D&nbsp;
<BR>OSF1V4.0D_PTH_OPT.OBJ</TD>

<TD>4.0D</TD>

<TD>cc</TD>
</TR>

<TR>
<TD>HP-UX</TD>

<TD>10.10&nbsp;
<BR>HP-UXB.10.10_PTH_OPT.OBJ</TD>

<TD>10.10&nbsp;
<BR>10.20</TD>

<TD>cc</TD>
</TR>

<TR>
<TD>HP-UX (pthreads)&nbsp;
<BR>(default)</TD>

<TD>11.0&nbsp;
<BR>HP-UXB.11.00_32_PTH_OPT.OBJ</TD>

<TD>11.0</TD>

<TD>cc</TD>
</TR>

<TR>
<TD>HP-UX (64-bit)</TD>

<TD>11.0&nbsp;
<BR>HP-UXB.11.00_64_PTH_OPT.OBJ</TD>

<TD>11.0</TD>

<TD>cc</TD>
</TR>

<TR>
<TD>Linux (Redhat)</TD>

<TD>5.1&nbsp;
<BR>Linux2.0.32_x86_PTH_OPT.OBJ</TD>

<TD>5.1</TD>

<TD>gcc 2.7.2.3</TD>
</TR>

<TR>
<TD>Windows NT</TD>

<TD>4.0&nbsp;
<BR>WINNT4.0_OPT.OBJ</TD>

<TD>4.0 (SP3)</TD>

<TD>VC++ 4.2</TD>
</TR>

<TR>
<TD>Windows 95</TD>

<TD>Win 95&nbsp;
<BR>WIN954.0_OPT.OBJ</TD>

<TD>Win 95&nbsp;
<BR>Win 98&nbsp;
<BR>Win NT 3.51&nbsp;
<BR>Win NT 4.0</TD>

<TD>VC++ 4.2</TD>
</TR>
</TABLE></CENTER>
&nbsp;
<BR>Important changes to note are:

<P>1. Irix
<BLOCKQUOTE>
<DT>
The pthreads-based (n32) version of nspr is now the default. The sproc-based
version (o32) will also be available in this release, but will not be supported
in future releases.</DT>
</BLOCKQUOTE>
2. Solaris
<BLOCKQUOTE>The pthreads-based version is the default and the only version
available. Pthreads and Solaris threads are compatible on Solaris. To use
purify on Solaris, libpthread should be explicitly specified in the list
of libraries passed to the linker, ahead of other system libraries such
as -lposix4, -lsocket, -ldl, etc,.</BLOCKQUOTE>
3. HP-UX
<BLOCKQUOTE>A 64-bit version of nspr is also available for HP-UX 11.0.</BLOCKQUOTE>
4. Digital Unix
<BLOCKQUOTE>The nspr library is now built/linked without the -taso option;
this means addresses beyond the 32-bit limit may be used.</BLOCKQUOTE>

<H3>
5.&nbsp;<A NAME="Compatibility"></A>Compatibility</H3>
The beta release 3.0 of nspr is both source code and binary compatible
with the 19980529B release of nspr.

<P>For the nspr library, binary compatibility does not preclude the addition
of new error codes to the set of <A HREF="http://www.mozilla.org/docs/refList/refNSPR/prerr.html#1027954">nspr
error codes </A>already defined. An application should allow for nspr functions
returning error codes not documented for the particular release with which
it is linked. This helps to retain backward compatibility as new error
codes are added upon discovery of new information about platform-specific
error codes.
<H3>
6.&nbsp;<A NAME="Release"></A>Release Components</H3>
The main components of this release are a set of shared libraries and header
files for each platform. A debug build and a release (optimized) build
of the libraries are made available for each platform.
<H4>
6.1 Platform Directory</H4>
The platform-dependent name of the directory where the components are placed
is of the form

<P>&nbsp; &lt;os-name>&lt;os-version>[_&lt;compiler>][cpu-arch][_&lt;implementation
strategy>]_&lt;DBG/OPT>.OBJ

<P>&nbsp; For example,
<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IRIX6.2_DBG.OBJ (debug build)
<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SunOS5.5.1_PTH_OPT.OBJ (optimized build)
<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IRIX6.2_n32_PTH_DBG.OBJ (built using
the -n32 compiler option,
<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
pthreads implementation strategy)
<H4>
6.2 Implementation Strategy</H4>
For the implementation of nspr, different strategies
are used on&nbsp; different platforms. On some platforms the nspr threads
map directly to the native threads on the platform, while on others nspr
supports both threads that are scheduled by nspr and the native threads.
<BR>&nbsp;
<BR>&nbsp;The default implementation strategies in this release are:
<BR>&nbsp; - pthreads: all Unix platforms
<BR>&nbsp; - classic: Win NT (combined MxN model, with Windows threads
and fibers)
<BR>&nbsp; - native threads: Win95
<H4>
6.3 Components</H4>
Under each &lt;platform> directory, there are:

<P>1. include directory, containing the&nbsp; header files
<BR>2. lib directory, containing the libraries. Three libraries are built
on all platforms: nspr, plc, plds. Three other
<BR>&nbsp;&nbsp;&nbsp; libraries are built on server platforms only: ares,
prstrms and nsps.&nbsp; Static, shared (dynamic link), and purified
<BR>&nbsp;&nbsp;&nbsp; (for a subset of platforms) versions of the libraries
are built.

<P>The nspr library exports the core nspr20 functions.

<P>The plc (Portable Library C) library is a separate library from&nbsp;
the core nspr20.&nbsp; You do
<BR>not need to use plc if you just want to use the core nspr20 functions.&nbsp;
The plc library currently
<BR>contains thread-safe&nbsp; string functions and command-line option
functions.

<P>The plds (Portable Library Data Structures) library supports data structures
such as arenas, hash tables, and event queues.&nbsp; It is important to
note that services of&nbsp; plds are not thread-safe. To use these services
in a multi-threaded environment, clients have to implement their own thread-safe
access, by acquiring locks/monitors, for example.

<P>The nsps library (libnsps) exports services that are supported only
for the server platforms. These services are built on top of nspr and are
not subject to the Netscape Public License(NPL)/Mozilla Public License(MPL)
requirements.

<P>For Solaris platforms with UltraSparc processors only, a platform-specific
library, libultrasparc, is also supplied. This library implements optimized
versions of atomic operations by using the features present in the UltraSparc
(V9) processors, but not in the Sparc (V8) processors.&nbsp; This library
is linked into libnspr, with the name libatomic, by use of the auxiliary
filter mechanism of the Solaris linker. To use this library at runtime,
on UltraSparc systems,&nbsp; libultrasparc21.so should be copied into a
file named libatomic.so and the new file should be present in the path
searched by the linker.

<P>3. mdheader.jar, jar file for the header files.
<BR>4. mdbinary.jar,&nbsp; jar for the libraries.
<H3>
7.&nbsp;<A NAME="Test"></A>Test Data</H3>
All the major functional areas of nspr were tested using the programs in
the nspr test suite. Both functional and stress tests in the pr/tests directory
were successfully run on multi-processor systems for all platforms, except
for Win95.
<H4>
7.1 Runtime Error Detection</H4>
A subset of the test programs were run successfully on Solaris and Windows
NT (both Win95 and Win NT versions) with the purify program.
<H4>
7.2 Code Coverage</H4>
The purecoverage (v4.2) tool was used to measure code coverage during functional
testing on Solaris 2.5.1. The coverage data is summarized in the following
table.
<BR>&nbsp;
<TABLE BORDER COLS=7 WIDTH="100%" >
<TR>
<TD>Library</TD>

<TD>Functions unused</TD>

<TD>used</TD>

<TD>used %</TD>

<TD>Lines unused</TD>

<TD>used</TD>

<TD>used %</TD>
</TR>

<TR>
<TD>libnspr21.so</TD>

<TD>271</TD>

<TD>408</TD>

<TD>60%</TD>

<TD>4274</TD>

<TD>4798</TD>

<TD>52%</TD>
</TR>
</TABLE>
&nbsp;
<BR>The same set of tests were run on all the platforms.
<H3>
&nbsp;8.&nbsp;<A NAME="How to file bug"></A>Reporting bugs</H3>
Bugs discovered should be reported by filing a report in <A HREF="http://scopus.mcom.com/bugsplat/enter_bug.cgi?bug_status=NEW&reporter=srinivas&product=NSPR&version=2.0&component=&target_fix_version=&rep_platform=All&op_sys=other&area=CODE&language=all&bug_severity=normal&priority=P2&webserver=&webbrowser=&dbase=&db_version=&assigned_to=srinivas&qa_assigned_to=srinivas&escalation_status=Eng%3A+Not+Looked+at+yet&escalation_engineer=&escalation_level=&escalation_approved=&build_id=&talkback=&cc=larryh%2Cwtc&bug_file_loc=&short_desc=&comment=&maketemplate=Remember+values+as+bookmarkable+template&form_name=enter_bug">Bugsplat</A>.
The following information is required
<UL>
<LI>
platform (Solaris 2.5.1, HP-UX 11.0, etc.)</LI>

<LI>
number of cpus in the system</LI>

<LI>
a trace stack, in the event of a crash</LI>

<LI>
reproducibility of the problem</LI>

<LI>
location of core dump, if available, along with those for the libraries
and executables</LI>
</UL>

<H3>
&nbsp;9.&nbsp;<A NAME="Building from"></A>Building from source</H3>
This release is built from the source, at the CVS repository rooted at
/m/src, with the CVS tag
<BR>NSPR20_RELEASE_3_0.&nbsp; You can check out the source from CVS by
<BR>&nbsp;&nbsp;&nbsp; cvs co -r NSPR20_RELEASE_3_0 ns/nspr20
<P>To build, do
<BR>&nbsp;&nbsp;&nbsp; cd ns/nspr20
<BR>&nbsp;&nbsp;&nbsp; gmake export
<H3>
10.&nbsp;<A NAME="Contact"></A>Contact Info</H3>
<A HREF="http://warp/hardcore/prj-nspr20/">http://warp/projects/hardcore/prj-nspr20</A>&nbsp;
- nspr20 home page
<BR><A HREF="mailto:nsprgroup">nsprgroup</A>&nbsp;&nbsp; - the nspr team
<BR><A HREF="mailto:nspr20eng">nspr20eng</A>&nbsp; - mailing list for nspr20
developers
<BR><A HREF="mailto:nspr20clients">nspr20clients</A> - mailing list for
nspr20 clients
<BR><A HREF="news://news.mozilla.org/netscape.public.mozilla.nspr">netscape.public.mozilla.nspr</A>&nbsp;
- nspr newsgroup at mozilla.org

<P>&nbsp;
<BLOCKQUOTE>&nbsp;
<BR>&nbsp;</BLOCKQUOTE>



<?
require_once "{$config['file_root']}/includes/footer.inc.php"
?>
