<?php

$html_title = 'NSPR 4.0 Release';

$menu = array(
    'id' => 'default',
);

$extra_headers = '
<meta name="Author" content="Srinivas Lingutla">
<meta name="GENERATOR" content="Mozilla/4.61 [en]C-NSCP  (WinNT; U) [Netscape]">
';

require_once "{$config['file_root']}/includes/header.inc.php"

?>

&nbsp;
<br>&nbsp;
<center>
<h2>
NSPR 4.0 Release</h2></center>

<center>Mar-2-2000</center>

<p><br>
<h2>
Table of Contents</h2>

<ol>
<li>
<a href="#Introduction">Introduction</a></li>

<li>
<a href="#What's">What's New</a></li>

<li>
<a href="#New Release naming">Library Version Specification</a></li>

<li>
<a href="#Platforms">Platforms</a></li>

<li>
<a href="#Compatibility">Compatibility</a></li>

<li>
<a href="#Release">Release Components</a></li>

<li>
<a href="#Test">Test Data</a></li>

<li>
<a href="#How to file bug">Reporting bugs</a></li>

<li>
<a href="#Building from">Building from source</a></li>

<li>
<a href="#Contact">Contact Info</a></li>
</ol>

<h3>
1.&nbsp;<a NAME="Introduction"></a>Introduction</h3>
The NSPR 4.0 release is available at&nbsp; /share/builds/components/nspr20/v4.0.
<b>This
is a major version upgrade from the 3.x&nbsp; releases of NSPR and NSPR
4.0 is not fully backward compatible with the older releases</b>.
<h3>
2.&nbsp;<a NAME="What's"></a>What's New</h3>
In addition to several bug fixes the following new features are available
in this release, as compared to NSPR 3.5.1.
<h4>
2.1 New functions and features</h4>
1. Specification of security attributes of named objects
<blockquote>The security attributes of named objects (files, shared memory
and semaphores) can now be specified with a platform-independent API at
the time of creation; the access modes are similar to those in POSIX.</blockquote>
2.&nbsp; Thread pools
<blockquote>A set of new interfaces for creating thread pools to create
and manage jobs. This is a preliminary version of the API and is subject
to change.
<p>The new interfaces and test programs (for sample usage) are found in:
<p>Header files: prtpool.h
<br>Test programs: pr/tests/thrpool_server.c</blockquote>
3. Support for IPv6
<blockquote>Support of IPv6 is now included for all platforms. The API
is similar to the one defined in RFC 2553. The IPv6 implementation is based
on the native IPv6 support, where available, and is emulated with IPv4
sockets and IPv4-mapped IPv6 addresses on other platforms. Native IPv6
support is available in the base OS on AIX 4.3.3 and Solaris 8.
<p>An application can simultaneously use IPv4 and IPv6 sockets.
<p>Header file: prio.h, prnetdb.h
<br>Test program: pr/tests/socket.c</blockquote>
4. Support for blocking and unblocking interrupts.
<blockquote>Two new interfaces, PR_BlockInterrupt and PR_UnblockInterrupt
are added to NSPR. When a thread blocks interrupt, the interrupt is kept
pending until it is unblocked.
<p>Header files: prthread.h</blockquote>
5. Source of random noise to seed pseudo-random number generators.
<blockquote>A new function, PR_GetRandomNoise, is available to generate
random seeds.</blockquote>
6. Server-side socket features for Mac
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; A set of server-side socket
features are supported on the Mac platform. These include accepting connections
and
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; blocking IO.
<p>7. Enhanced interface for dynamic load library function
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; A new function, PR_LoadLibraryWithFlags,
to support immediate-load/lazy-load options and
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; platform-specific library
attributes.
<p>8. Miscellaneous features
<ul>
<li>
New data types for file offset, PROffset32 and PROffset64</li>

<li>
Add PR_EXCL flag for PR_Open</li>

<li>
Add PR_SendFile to PRIOMethods table</li>

<li>
NSPR interfaces are declared with the dllimport attribute on Windows</li>
</ul>

<h4>
2.2 Bug fixes</h4>
The bug fixes in NSPR 4.0 are listed in the report&nbsp; <a href="http://bugzilla.mozilla.org/show_bug.cgi?id=29632">Bugzilla
bug 29632.</a>
<h4>
2.3 Obsolete and Modified Interfaces</h4>
NSPR 4.0 is not backward compatible with the previous releases of NSPR.
<h4>
2.3.1 Obsolete library</h4>
The C++ I/O Streams library (prstrms.h, libprstrms3) is no longer part of the NSPR
distribution.
<p><b>2.3.2 Obsolete interfaces</b>
<p>A few interfaces have been removed from NSPR 4.0, they are listed in
the report <a href="http://bugzilla.mozilla.org/show_bug.cgi?id=23642">Obsolete
interfaces in NSPR 4.0 Bugzilla bug 23642.</a>
<p><b>2.3.3 Modified interfaces</b>
<p>The semantics of a few interfaces are modified; they are listed in the
report&nbsp; <a href="http://bugzilla.mozilla.org/show_bug.cgi?id=23641">Bugzilla
bug 23641</a>
<h3>
3.&nbsp;<a NAME="New Release naming"></a>Library Name and Versioning</h3>
The binaries for this release are named libnspr4 (nspr4 on Win 95); this
release is not backward compatible with previous releases.
<p>The full release number of nspr library can be determined in several
ways:
<p>1. The nspr library exports a function, libVersionPoint, that can be
called to retrieve the version of the library.&nbsp; The function and data
prototypes are available for other libraries to provide similar version
information.
<br>2. On Win32 systems, the version number is embedded in the resource
descriptor of the DLL and can be viewed using Windows Explorer. On Unix
system, the "what" command of sccs or the "ident" command of rcs can be
used to obtain the version information.
<br>3. The PR_VersionCheck function can be called to check for compatibility;
given a version number the function returns success condition if the version
of the nspr library loaded into the application is compatible.
<h3>
4.&nbsp;<a NAME="Platforms"></a>Platforms</h3>
The set of supported platforms is listed in the following table. For most
platforms, a single release of the nspr library is used to support all
the current releases of the OS.
<br>&nbsp;
<br>&nbsp;
<table BORDER >
<tr BGCOLOR="#000000">
<td><b><font color="#FFFFFF">Platform</font></b></td>

<td><b><font color="#FFFFFF">Build</font></b></td>

<td><b><font color="#FFFFFF">Compiler</font></b>
<br><b><font color="#FFFFFF">Req</font></b></td>

<td><b><font color="#FFFFFF">Certify &amp;</font></b>
<br><b><font color="#FFFFFF">Support&nbsp;</font></b></td>

<td><b><font color="#FFFFFF">Thread Model&nbsp;</font></b></td>

<td><b><font color="#FFFFFF">Build Name</font></b></td>

<td><b><font color="#FFFFFF">Comments</font></b></td>
</tr>

<tr>
<td><i>Solaris&nbsp;</i></td>

<td><b>2.6</b></td>

<td>SparcWorks C/C++ 4.2</td>

<td><b>2.6</b>
<br><b>7</b>
<br><b>8</b></td>

<td>pthreads</td>

<td>SunOS5.6_OPT.OBJ&nbsp;</td>

<td>32-bit version</td>
</tr>

<tr>
<td></td>

<td><b>7/64-bit</b></td>

<td>SparcWorks C/C++ 5.0</td>

<td><b>7/64-bit</b>
<br><b>8/64-bit</b></td>

<td>pthreads</td>

<td>SunOS5.7_64_OPT.OBJ</td>

<td>64-bit version</td>
</tr>

<tr>
<td><i>Windows</i></td>

<td><b>95</b></td>

<td>Visual C++ 6.0</td>

<td><b>95</b>
<br><b>98</b>
<br><b>NT 4.0</b>
<br><b>Win 2000</b></td>

<td>threads</td>

<td>WIN954.0_OPT.OBJ</td>

<td>MSVC 6.0 SP3</td>
</tr>

<tr>
<td><i>Win NT</i></td>

<td><b>4.0SP4</b></td>

<td>Visual C++ 6.0</td>

<td><b>4.0SP4</b>
<br><b>4.0SP6a</b>
<br><b>Win 2000</b></td>

<td>threads &amp;
<br>fibers</td>

<td>WINNT4.0_OPT.OBJ</td>

<td>MSVC 6.0 SP3</td>
</tr>

<tr>
<td><i>AIX&nbsp;</i></td>

<td><b>4.3.3</b></td>

<td>C Set ++ for AIX 3.6.4 - xlC</td>

<td><b>4.3.3</b></td>

<td>pthreads</td>

<td>AIX4.3_OPT.OBJ</td>

<td>32-bit</td>
</tr>

<tr>
<td></td>

<td><b>4.3.3/64-bit</b></td>

<td>C Set ++ for AIX 3.6.4 - xlC</td>

<td><b>4.3.3/64-bit</b></td>

<td>pthreads</td>

<td>AIX4.3_64_OPT.OBJ</td>

<td>64-bit</td>
</tr>

<tr>
<td><i>Tru64 UNIX (the new name of Digital UNIX)</i></td>

<td><b>4.0D</b></td>

<td>Digital C++ v6.1-027
<br>Digital CC v5.6-079</td>

<td><b>4.0D</b>
<br><b>5.0</b></td>

<td>pthreads</td>

<td>OSF1V4.0D_OPT.OBJ</td>

<td></td>
</tr>

<tr>
<td><i>HP-UX</i></td>

<td><b>11.0</b></td>

<td>aCC: A.03.13
<br>cc: A.11.01.00</td>

<td><b>11.0</b></td>

<td>pthreads</td>

<td>HP-UXB.11.00_OPT.OBJ</td>

<td>32-bit</td>
</tr>

<tr>
<td></td>

<td><b>11.0/64-bit</b></td>

<td>aCC: A.03.04
<br>cc: A.11.00.00</td>

<td><b>11.0/64-bit</b></td>

<td>pthreads</td>

<td>HP-UXB.11.00_64_OPT.OBJ</td>

<td>64-bit</td>
</tr>

<tr>
<td><i>Linux</i></td>

<td><b>Red Hat 6.0</b></td>

<td>egcs-1.1.2</td>

<td><b>RH 6.1</b></td>

<td>pthreads</td>

<td>Linux2.2_x86_glibc_PTH_OPT.OBJ</td>

<td>glibc-2.1.2&nbsp;</td>
</tr>
</table>

<p>Important changes to note are:
<p>1. Solaris
<blockquote>Solaris 8 is supported.
<br>Two binaries are provided for Solaris
<p>1. A Solaris 2.6 binary is for 32-bit applications running on Solaris
2.6, 7 and 8.
<br>2. A 64-bit Solaris 7 binary for 64-bit applications running on Solaris
7 and 8
<p>To use purify on Solaris, libpthread should be explicitly specified
in the list of libraries passed to the linker, ahead of other system libraries
such as -lposix4, -lsocket, -ldl, etc.,.</blockquote>
2. AIX
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Two versions are supported
for AIX 4.3.3, one for 32-bit and another for 64-bit mode. AIX 4.3.2 is
no longer
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; supported.
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; A bug in the send_file function
in AIX causes data corruption in the 64-bit version of AIX. To work around
this
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bug the environment variable
NSPR_AIX_SEND_FILE_USE_DISABLED should be set to 1 when using the
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 64-bit version of NSPR.
<p>3. Linux
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Linux is now supported only
on the Redhat 6.1 release. The binaries are built with the egcs-1.1.2 compiler
and
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; glibc-2.1.2 library.
<p>4. Win 2000
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; The latest version of Windows,
Windows 2000, is supported.
<h3>
5.&nbsp;<a NAME="Compatibility"></a>Compatibility</h3>
The NSPR 4.0 release is not backward compatible with the previous releases
of NSPR.
<p>For the nspr library, backward compatibility does not preclude the addition
of new error codes to the set of <a href="http://www.mozilla.org/docs/refList/refNSPR/prerr.html#1027954">nspr
error codes </a>already defined. An application should allow for nspr functions
returning error codes not documented for the particular release with which
it is linked. This helps to retain backward compatibility as new error
codes are added upon discovery of new information about platform-specific
error codes.
<h3>
6.&nbsp;<a NAME="Release"></a>Release Components</h3>
The main components of this release are a set of shared libraries and header
files for each platform. A debug build and a release (optimized) build
of the libraries are made available for each platform.
<h4>
6.1 Platform Directory</h4>
The platform-dependent name of the directory where the components are placed
is of the form
<p>&nbsp; &lt;os-name>&lt;os-version>[_&lt;compiler>][cpu-arch][_&lt;implementation
strategy>][_&lt;addr-bits>]_&lt;DBG/OPT>.OBJ
<p>&nbsp; For example,
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SunOS5.6_OPT.OBJ (optimized build)
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; AIX4.3_64_DBG.OBJ (64-bit, debug build)
<h4>
6.2 Implementation Strategy</h4>
For the implementation of nspr, different strategies
are used on&nbsp; different platforms. On some platforms the nspr threads
map directly to the native threads on the platform, while on others nspr
supports both threads that are scheduled by nspr and the native threads.
<p>&nbsp;The default implementation strategies in this release are:
<br>&nbsp; - pthreads: all Unix platforms
<br>&nbsp; - classic: Win NT (combined MxN model, with Windows threads
and fibers)
<br>&nbsp; - native threads: Win95
<h4>
6.3 Components</h4>
Under each &lt;platform> directory, there are:
<p>1. include directory, containing the header files
<br>2. lib directory, containing the libraries. Three libraries are built
on all platforms: nspr, plc, plds. Only shared (dynamic link) versions
of the libraries are built.
<p>The nspr library exports the core nspr functions.
<p>The plc (Portable Library C) library is a separate library from the
core nspr.&nbsp; You do
<br>not need to use plc if you just want to use the core nspr functions.&nbsp;
The plc library currently
<br>contains thread-safe string functions and functions for processing
command-line options.
<p>The plds (Portable Library Data Structures) library supports data structures
such as arenas and hash tables. It is important to note that services of&nbsp;
plds are not thread-safe. To use these services in a multi-threaded environment,
clients have to implement their own thread-safe access, by acquiring locks/monitors,
for example.
<p>For Solaris platforms with UltraSparc processors only, a platform-specific
library, libultrasparc, is also supplied. This library implements optimized
versions of atomic operations by using the features present in the UltraSparc
(V9) processors, but not in the Sparc (V8) processors.&nbsp; This library
is linked into libnspr, with the name libatomic, by use of the auxiliary
filter mechanism of the Solaris linker. To use this library at runtime,
on UltraSparc systems,&nbsp; libultrasparc4.so should be copied into a
file named libatomic.so and the new file should be present in the path
searched by the linker, set using LD_LIBRARY_PATH.
<p>3. bin directory, containing a perl script, compile-et.pl, and a Java
bundle, prerr.properties.
<br>4. mdheader.jar, jar file for the header files.
<br>5. mdbinary.jar,&nbsp; jar for the libraries, executable programs,
and scripts.
<h3>
7.&nbsp;<a NAME="Test"></a>Test Data</h3>
All the major functional areas of nspr were tested using the programs in
the nspr test suite. Both functional and stress tests in the pr/tests directory
were successfully run on multi-processor systems for most platforms, except
for Win95/98.
<p>In addition, tests described in the <a href="nspr35_y2kplan.html">Year
2000 Test Plan</a> were successfully executed.
<h3>
&nbsp;8.&nbsp;<a NAME="How to file bug"></a>Reporting bugs</h3>
Bugs discovered should be reported by filing a report in <a href="http://scopus.mcom.com/bugsplat/enter_bug.cgi?bug_status=NEW&reporter=srinivas&product=NSPR&version=2.0&component=&target_fix_version=&rep_platform=All&op_sys=other&area=CODE&language=all&bug_severity=normal&priority=P2&webserver=&webbrowser=&dbase=&db_version=&assigned_to=srinivas&qa_assigned_to=srinivas&escalation_status=Eng%3A+Not+Looked+at+yet&escalation_engineer=&escalation_level=&escalation_approved=&build_id=&talkback=&cc=larryh%2Cwtc&bug_file_loc=&short_desc=&comment=&maketemplate=Remember+values+as+bookmarkable+template&form_name=enter_bug">Bugsplat</a>.
The following information is required
<ul>
<li>
platform (Solaris 2.6, HP-UX 11.0, etc.)</li>

<li>
number of cpus in the system</li>

<li>
a stack trace, in the event of a crash</li>

<li>
reproducibility of the problem</li>

<li>
location of core dump, if available, along with those for the libraries
and executables</li>
</ul>

<h3>
&nbsp;9.&nbsp;<a NAME="Building from"></a>Building from source</h3>
This release is built from the source, at the CVS repository rooted at
cvs.mozilla.org:/cvsroot, with the CVS tag
<br>NSPRPUB_RELEASE_4_0.&nbsp; You can check out the source from CVS by
<br>&nbsp;&nbsp;&nbsp; cvs co -r NSPRPUB_RELEASE_4_0 mozilla/nsprpub
<p>To build, do
<br>&nbsp;&nbsp;&nbsp; cd mozilla/nsprpub
<br>&nbsp;&nbsp;&nbsp; gmake export
<h3>
10.&nbsp;<a NAME="Contact"></a>Contact Info</h3>
<a href="http://www.mozilla.org/docs/refList/refNSPR">http://www.mozilla.org/docs/refList/refNSPR</a>
- NSPR documentation
<br><a href="http://warp/hardcore/prj-nspr20/">http://warp/projects/hardcore/prj-nspr20</a>&nbsp;
- nspr home page
<br><a href="mailto:nsprgroup">nsprgroup</a>&nbsp;&nbsp; - the nspr team
<br><a href="mailto:nspr20clients">nspr20clients</a> - mailing list for
nspr clients
<br><a href="news://news.mozilla.org/netscape.public.mozilla.nspr">netscape.public.mozilla.nspr</a>&nbsp;
- nspr newsgroup at mozilla.org
<br>&nbsp;
<br>&nbsp;
<blockquote>&nbsp;</blockquote>


<?
require_once "{$config['file_root']}/includes/footer.inc.php"
?>
